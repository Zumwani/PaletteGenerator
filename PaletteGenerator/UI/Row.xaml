<UserControl x:Class="PaletteGenerator.UI.Row"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:PaletteGenerator"
             xmlns:converters="clr-namespace:PaletteGenerator.Converters"
             xmlns:ui="clr-namespace:PaletteGenerator.UI"
             x:Name="row">

    <UserControl.Resources>
        <ResourceDictionary>
            
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Button.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            
            <Style TargetType="{x:Type ItemsControl}">

                <Setter Property="VirtualizingPanel.IsVirtualizing"     Value="True"/>
                <Setter Property="VirtualizingPanel.VirtualizationMode" Value="Recycling"/>

                <Setter Property="ItemTemplate">
                    <Setter.Value>
                        <DataTemplate DataType="{x:Type Color}">
                            <Rectangle Width="64" Height="64" Fill="{Binding Converter={converters:ToBrush}}"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            
        </ResourceDictionary>
    </UserControl.Resources>

    <UserControl.Style>
        <Style TargetType="{x:Type ui:Row}">
            <Setter Property="Left" Value="{Binding Source={x:Static local:App.Window}, Path=LeftColor, Mode=OneWay}"/>
            <Setter Property="Right" Value="{Binding Source={x:Static local:App.Window}, Path=RightColor, Mode=OneWay}"/>
            <Setter Property="Hue" Value="{Binding Source={x:Static local:App.Window}, Path=Hue, Mode=OneWay}"/>
            <Setter Property="Saturation" Value="{Binding Source={x:Static local:App.Window}, Path=Saturation, Mode=OneWay}"/>
            <Setter Property="Columns" Value="{Binding Source={x:Static local:App.Window}, Path=Columns, Mode=OneWay}"/>
        </Style>
    </UserControl.Style>
    
    <StackPanel Orientation="Horizontal" Margin="0,6">

        <ui:ColorEditor Color="{Binding Source={x:Static local:App.Window}, Path=LeftColor, Mode=TwoWay}" BorderThickness="1,1,0,1"/>
        <ItemsControl ItemsSource="{Binding ElementName=row, Path=Left}"/>
        <ui:ColorEditor Color="{Binding ElementName=row, Path=Center, Mode=TwoWay}" BorderThickness="0,1"/>
        <ItemsControl ItemsSource="{Binding ElementName=row, Path=Right}"/>
        <ui:ColorEditor Color="{Binding Source={x:Static local:App.Window}, Path=RightColor, Mode=TwoWay}" BorderThickness="0,1,1,1"/>

        <Canvas>
            <Button VerticalAlignment="Center" FontSize="12" Margin="4,0" Click="Remove" Foreground="DimGray" Content="✖"/>
        </Canvas>

    </StackPanel>

</UserControl>