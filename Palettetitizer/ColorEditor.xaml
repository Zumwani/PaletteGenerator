<UserControl x:Class="Palettetitizer.ColorEditor"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Palettetitizer"
             xmlns:converters="clr-namespace:Palettetitizer.Converters"
             x:Name="editor"
             Width="42" Height="42" 
             BorderThickness="0" BorderBrush="White"
             Loaded="UserControl_Loaded">

    <ToggleButton x:Name="toggle" IsHitTestVisible="{Binding ElementName=popup, Path=IsOpen, Converter={converters:InvertBool}}"
                  BorderThickness="{Binding BorderThickness}" BorderBrush="Black"
                  IsEnabled="{Binding ElementName=editor, Path=IsEditable}"
                  Background="Blue">

        <Popup x:Name="popup" StaysOpen="False" IsOpen="{Binding ElementName=toggle, Path=IsChecked}">
            <Border Width="200" Height="200" Background="Blue">
                
            </Border>
        </Popup>
        
    </ToggleButton>
    
</UserControl>